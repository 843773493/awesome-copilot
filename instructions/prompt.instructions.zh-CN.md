

---
description: '创建高质量 GitHub Copilot 提示文件的指南'
applyTo: '**/*.prompt.md'
---

# GitHub Copilot 提示文件指南

创建有效且可维护的提示文件的说明，以指导 GitHub Copilot 在任何仓库中提供一致、高质量的结果。

## 范围与原则
- 目标受众：为 Copilot Chat 编写可重用提示的维护者和贡献者。
- 目标：可预测的行为、清晰的期望、最小的权限以及跨仓库的可移植性。
- 主要参考：VS Code 关于提示文件的文档以及组织特定的惯例。

## 前置信息要求

每个提示文件应包含 YAML 前置信息，包含以下字段：

### 必需/推荐字段

| 字段 | 必需 | 描述 |
|-------|----------|-------------|
| `description` | 推荐 | 提示的简要描述（单句，可操作的结果） |
| `name` | 可选 | 在聊天中输入 `/` 后显示的名称。若未指定，默认使用文件名 |
| `agent` | 推荐 | 要使用的代理：`ask`、`edit`、`agent` 或自定义代理名称。若未指定，默认使用当前代理 |
| `model` | 可选 | 要使用的语言模型。若未指定，默认使用当前选择的模型 |
| `tools` | 可选 | 该提示可用的工具/工具集名称列表 |
| `argument-hint` | 可选 | 在聊天输入中显示的提示文本，以引导用户交互 |

### 指南

- 使用一致的引号（推荐单引号）并每行一个字段以提高可读性和版本控制的清晰度
- 如果指定了 `tools` 且当前代理是 `ask` 或 `edit`，默认代理将变为 `agent`
- 保留组织要求的任何附加元数据（如 `language`、`tags`、`visibility` 等）

## 文件命名与存放位置
- 使用以 `.prompt.md` 结尾的 kebab-case 文件名，并存储在 `.github/prompts/` 目录下，除非工作区标准指定了其他目录。
- 提供简短的文件名以传达操作意图（例如，`generate-readme.prompt.md` 而不是 `prompt1.prompt.md`）。

## 内容结构
- 以与提示意图匹配的 `#` 级标题开头，以便在快速选择搜索中更好地显示。
- 使用可预测的章节组织内容。推荐基础结构：`任务` 或 `主要指令`、`范围与前提条件`、`输入`、`工作流程`（分步骤）、`输出期望`、`质量保证`。
- 根据领域调整章节名称，但保留逻辑流程：为什么 → 上下文 → 输入 → 操作 → 输出 → 验证。
- 使用相对链接引用相关提示或指令文件，以帮助发现。

## 输入与上下文处理
- 使用 `${input:variableName[:placeholder]}` 表示必填值，并解释用户何时必须提供这些值。在可能的情况下提供默认值或替代方案。
- 仅在必要时提及上下文变量（如 `${selection}`、`${file}`、`${workspaceFolder}`），并描述 Copilot 应如何解释它们。
- 文档说明当必填上下文缺失时应如何处理（例如，“请求文件路径并在未定义时停止”）。

## 工具与权限指导
- 将 `tools` 限制为完成任务所需的最小工具集。如果顺序重要，请按首选执行顺序列出。
- 如果提示继承自聊天模式的工具，请说明这种关系，并说明任何关键的工具行为或副作用。
- 警告关于破坏性操作（文件创建、编辑、终端命令），并在工作流程中包含限制措施或确认步骤。

## 指令语气与风格
- 使用直接、命令式的句子，针对 Copilot（例如，“分析”、“生成”、“总结”）。
- 保持句子简短且无歧义，遵循 Google 开发者文档翻译的最佳实践以支持本地化。
- 避免使用习语、幽默或文化特定的引用；优先使用中性、包容性的语言。

## 输出定义
- 指定预期结果的格式、结构和位置（例如，“使用以下模板创建 `docs/adr/adr-XXXX.md`”）。
- 包含成功标准和失败触发条件，以便 Copilot 知道何时停止或重试。
- 提供验证步骤——手动检查、自动化命令或验收标准列表——供审查者在运行提示后执行。

## 示例与可重用资产
- 嵌入提示应生成或遵循的 Good/Bad 示例或骨架（Markdown 模板、JSON 模板）。
- 保持参考表格（能力、状态码、角色描述）内联以确保提示自包含。当上游资源发生变化时更新这些表格。
- 链接到权威文档，而不是复制冗长的指导。

## 质量保证检查清单
- [ ] 前置信息字段完整、准确且权限最小。
- [ ] 输入包含占位符、默认行为和回退方案。
- [ ] 工作流程涵盖准备、执行和后处理，无遗漏。
- [ ] 输出期望包含格式和存储细节。
- [ ] 验证步骤可操作（命令、差异检查、审查提示）。
- [ ] 提示引用的安全、合规和隐私政策为最新。
- [ ] 提示在 VS Code 中使用代表性场景成功运行（`Chat: Run Prompt`）。

## 维护指导
- 将提示与受影响的代码进行版本控制；当依赖项、工具或审查流程发生变化时，更新提示。
- 定期审查提示，确保工具列表、模型需求和链接文档仍然有效。
- 与其他仓库协调：当提示具有广泛用途时，将其通用指导提取到指令文件或共享提示包中。

## 其他资源
- [提示文件文档](https://code.visualstudio.com/docs/copilot/customization/prompt-files#_prompt-file-format)
- [Awesome GitHub Copilot 提示文件](https://github.com/github/awesome-copilot/tree/main/prompts)
- [工具配置](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_agent-mode-tools)