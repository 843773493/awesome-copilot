

---
description: "使用Vitest进行Node.js和JavaScript代码编写的指南"
applyTo: "**/*.js, **/*.mjs, **/*.cjs"
---

# 代码生成指南

## 编码规范
- 使用带有ES2022特性的JavaScript和Node.js（20+）的ESM模块
- 优先使用Node.js内置模块，尽量避免引入外部依赖
- 在添加任何额外依赖之前，请先询问用户是否需要
- 始终使用async/await处理异步代码，并使用'node:util'模块的promisify函数来避免回调
- 保持代码简洁且易于维护
- 使用具有描述性的变量和函数名
- 除非绝对必要，否则不要添加注释，代码应具有自解释性
- 不要使用`null`，对于可选值应始终使用`undefined`
- 优先使用函数而非类

## 测试
- 使用Vitest进行测试
- 为所有新功能和错误修复编写测试
- 确保测试涵盖边缘情况和错误处理
- 绝不要为了便于测试而修改原始代码，而是编写覆盖原始代码的测试

## 文档
- 在添加新功能或进行重大更改时，必要时更新README.md文件

## 用户交互
- 如果对实现细节、设计选择或需求需要澄清，请提出问题
- 始终用与问题相同语言回答，但代码、注释或文档等生成内容使用英文