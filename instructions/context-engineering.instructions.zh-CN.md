---
description: '关于通过更好的上下文管理来最大化 GitHub Copilot 效果的代码和项目结构指南'
applyTo: '**'
---

# 上下文工程

帮助 GitHub Copilot 理解您的代码库并提供更好建议的原则。

## 项目结构

- **使用描述性的文件路径**：`src/auth/middleware.ts` > `src/utils/m.ts`。Copilot 通过路径推断意图。
- **将相关代码放在一起**：保持组件、测试、类型和钩子文件的集中。一个搜索模式应能定位所有相关内容。
- **从索引文件导出公共 API**：导出的内容是接口，未导出的是内部实现。这有助于 Copilot 理解边界。

## 代码模式

- **优先使用显式类型而非类型推断**：类型注解是上下文。`function getUser(id: string): Promise<User>` 比 `function getUser(id)` 提供更多信息。
- **使用语义化名称**：`activeAdultUsers` > `x`。自我文档化的代码是 AI 可读的代码。
- **定义常量**：`MAX_RETRY_ATTEMPTS = 3` > 魔法数字 `3`。命名的值承载语义。

## 与 Copilot 协作

- **保持相关文件在标签页中打开**：Copilot 将打开的标签页作为上下文信号。正在处理认证相关代码？打开认证相关的文件。
- **有意地将光标定位在关键位置**：Copilot 优先考虑光标附近的代码。将光标放在上下文关键处。
- **使用 Copilot Chat 处理复杂任务**：内联补全的上下文有限。Chat 模式可查看更多文件。

## 上下文提示

- **添加 COPILOT.md 文件**：文档化 Copilot 应遵循的架构决策、模式和规范。
- **使用战略性注释**：在复杂模块顶部简要描述流程或目的。
- **显式引用模式**：如 "遵循 `src/api/users.ts` 的相同模式" 为 Copilot 提供具体示例。

## 多文件修改

- **首先描述范围**：在请求修改前告知 Copilot 所有涉及的文件。例如："我需要更新 User 模型、API 端点和测试文件。"
- **逐步进行修改**：每次只修改一个文件，并验证每个更改。不要一次性请求所有修改。
- **检查理解**：在复杂重构前询问 "您需要查看哪些文件？" 以确认 Copilot 的理解。

## Copilot 遇到困难时

- **缺少上下文**：打开相关文件或显式粘贴代码片段。
- **过时的建议**：Copilot 可能未看到最新更改。重新打开文件或重启会话。
- **通用答案**：提供更具体的约束条件，提及框架，或引用现有代码。
