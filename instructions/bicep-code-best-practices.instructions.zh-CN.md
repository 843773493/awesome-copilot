

---
描述: '使用 Bicep 实现基础设施即代码'
应用范围: '**/*.bicep'
---

## 命名规范

- 编写 Bicep 代码时，所有名称（变量、参数、资源）均应使用 lowerCamelCase 风格
- 使用描述性的资源类型符号名称（例如，'storageAccount' 而不是 'storageAccountName'）
- 避免在符号名称中使用 'name'，因为其代表资源本身，而非资源的名称
- 避免通过后缀来区分变量和参数

## 结构和声明

- 始终在文件顶部使用 @description 装饰器声明参数
- 所有资源均应使用最新的稳定 API 版本
- 所有参数均应使用描述性的 @description 装饰器
- 为命名参数指定最小和最大字符长度

## 参数

- 为测试环境设置安全的默认值（使用低成本定价层级）
- 稀疏使用 @allowed 装饰器，以避免阻止有效的部署
- 使用参数来表示部署之间会变化的设置

## 变量

- 变量会根据解析后的值自动推断类型
- 使用变量来包含复杂的表达式，而不是直接将其嵌入到资源属性中

## 资源引用

- 使用符号名称进行资源引用，而不是 reference() 或 resourceId() 函数
- 通过符号名称（resourceA.id）创建资源依赖关系，而非显式 dependsOn
- 为了从其他资源中访问属性，使用 'existing' 关键字，而不是通过输出传递值

## 资源名称

- 使用模板表达式与 uniqueString() 来创建有意义且唯一的资源名称
- 由于某些资源不允许以数字开头的名称，因此应为 uniqueString() 的结果添加前缀

## 子资源

- 避免过度嵌套子资源
- 使用父属性或嵌套方式，而非为子资源构建名称

## 安全性

- 切勿在输出中包含密钥或密文
- 直接在输出中使用资源属性（例如 storageAccount.properties.primaryEndpoints）

## 文档说明

- 在 Bicep 文件中添加有用的 // 注释以提高可读性