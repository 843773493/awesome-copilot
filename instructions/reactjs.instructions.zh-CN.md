

---
description: 'ReactJS 开发标准与最佳实践'
applyTo: '**/*.jsx, **/*.tsx, **/*.js, **/*.ts, **/*.css, **/*.scss'
---

# ReactJS 开发指南

遵循官方 React 文档（https://react.dev）的现代模式、Hook 和最佳实践，构建高质量 ReactJS 应用程序的指导原则。

## 项目背景
- 最新版 React（React 19+）
- 使用 TypeScript 实现类型安全（如适用）
- 默认使用带 Hook 的函数组件
- 遵循 React 官方的样式指南和最佳实践
- 使用现代构建工具（Vite、Create React App 或自定义 Webpack 配置）
- 实现良好的组件组合和可重用性模式

## 开发规范

### 架构
- 使用带 Hook 的函数组件作为主要模式
- 通过组件组合而非继承实现功能
- 按功能或领域组织组件以实现可扩展性
- 明确区分展示型组件和容器组件
- 使用自定义 Hook 实现可重用的状态逻辑
- 实现清晰的数据流组件层级

### TypeScript 集成
- 使用 TypeScript 接口定义属性、状态和组件
- 为事件处理程序和 ref 定义合适的类型
- 适当实现泛型组件
- 在 `tsconfig.json` 中启用严格模式以确保类型安全
- 利用 React 内置类型（`React.FC`、`React.ComponentProps` 等）
- 为组件变体和状态创建联合类型

### 组件设计
- 遵循单一职责原则
- 使用描述性且一致的命名约定
- 使用 TypeScript 或 PropTypes 实现属性验证
- 设计可测试且可重用的组件
- 保持组件小巧且专注于单一功能
- 使用组合模式（渲染属性、函数作为子元素）

### 状态管理
- 使用 `useState` 管理本地组件状态
- 使用 `useReducer` 管理复杂状态逻辑
- 使用 `useContext` 在组件树间共享状态
- 对复杂应用考虑使用外部状态管理（Redux Toolkit、Zustand）
- 实现状态规范化和数据结构
- 使用 React Query 或 SWR 管理服务端状态

### Hook 和副作用
- 使用 `useEffect` 时确保依赖数组正确，以避免无限循环
- 在副作用中实现清理函数以防止内存泄漏
- 在需要时使用 `useMemo` 和 `useCallback` 进行性能优化
- 创建自定义 Hook 实现可重用的状态逻辑
- 遵循 Hook 规则（仅在顶层调用）
- 使用 `useRef` 访问 DOM 元素并存储可变值

### 样式
- 使用 CSS Modules、Styled Components 或现代 CSS-in-JS 解决方案
- 采用移动优先的响应式设计方法
- 使用 BEM 方法论或其他类似的 CSS 类命名约定
- 使用 CSS 自定义属性（变量）实现主题化
- 实现一致的间距、排版和颜色系统
- 通过适当的 ARIA 属性和语义化 HTML 确保可访问性

### 性能优化
- 在适当情况下使用 `React.memo` 进行组件记忆化
- 使用 `React.lazy` 和 `Suspense` 实现代码分割
- 通过树摇优化和动态导入优化包体积
- 适度使用 `useMemo` 和 `useCallback` 避免不必要的重新渲染
- 对大型列表实现虚拟滚动
- 使用 React DevTools 分析组件以识别性能瓶颈

### 数据获取
- 使用现代数据获取库（React Query、SWR、Apollo Client）
- 实现正确的加载、错误和成功状态
- 处理竞争条件和请求取消
- 使用乐观更新以提升用户体验
- 实现合适的缓存策略
- 优雅处理离线场景和网络错误

### 错误处理
- 实现错误边界以处理组件级错误
- 在数据获取中使用正确的错误状态
- 为错误场景实现备用 UI
- 适当记录错误以辅助调试
- 在副作用和事件处理中处理异步错误
- 向用户提供有意义的错误信息

### 表单和验证
- 使用受控组件处理表单输入
- 使用库如 Formik、React Hook Form 实现表单验证
- 正确处理表单提交和错误状态
- 为表单实现可访问性功能（标签、ARIA 属性）
- 使用防抖验证以提升用户体验
- 处理文件上传和复杂表单场景

### 路由
- 使用 React Router 实现客户端路由
- 实现嵌套路由和路由保护
- 正确处理路由参数和查询字符串
- 为基于路由的代码分割实现懒加载
- 使用合适的导航模式和返回按钮处理
- 实现面包屑导航和导航状态管理

### 测试
- 使用 React Testing Library 为组件编写单元测试
- 测试组件行为，而非实现细节
- 使用 Jest 作为测试运行器和断言库
- 为复杂组件交互实现集成测试
- 适当模拟外部依赖和 API 调用
- 测试可访问性功能和键盘导航

### 安全性
- 清理用户输入以防止 XSS 攻击
- 在渲染前验证并转义数据
- 所有外部 API 调用使用 HTTPS
- 实现合适的认证和授权模式
- 避免将敏感数据存储在 localStorage 或 sessionStorage 中
- 使用内容安全策略（CSP）头

### 可访问性
- 适当使用语义化 HTML 元素
- 实现合适的 ARIA 属性和角色
- 确保所有交互元素支持键盘导航
- 为图片提供替代文本，为图标提供描述性文本
- 实现合适颜色对比度比例
- 使用屏幕阅读器和可访问性工具进行测试

## 实现流程
1. 规划组件架构和数据流
2. 设置项目结构并组织好文件夹
3. 定义 TypeScript 接口和类型
4. 实现带有适当样式的主组件
5. 添加状态管理及数据获取逻辑
6. 实现路由和导航功能
7. 添加表单处理和验证
8. 实现错误处理和加载状态
9. 为组件和功能添加测试覆盖率
10. 优化性能和包体积
11. 确保符合可访问性标准
12. 添加文档和代码注释

## 其他指南
- 遵循 React 的命名规范（组件使用 PascalCase，函数使用 camelCase）
- 使用有意义的提交信息并维护整洁的 Git 历史
- 实现合适的代码分割和懒加载策略
- 使用 JSDoc 文档化复杂组件和自定义 Hook
- 使用 ESLint 和 Prettier 保持代码格式一致
- 保持依赖项更新并审计安全漏洞
- 为不同部署阶段实现合适的环境配置
- 使用 React Developer Tools 进行调试和性能分析

## 常见模式
- 使用高阶组件（HOCs）处理跨关注点问题
- 使用渲染属性模式实现组件组合
- 使用复合组件处理相关功能
- 使用提供者模式实现基于上下文的状态共享
- 分离容器/展示型组件
- 使用自定义 Hook 提取可重用逻辑