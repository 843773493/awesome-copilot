---
name: scoutqa-test
description: |
  当用户要求“测试这个网站”、“运行探索性测试”、“检查可访问性问题”、“验证登录流程是否正常工作”、“在该页面查找错误”或请求自动化QA测试时，应使用此技能。在使用ScoutQA CLI触发的Web应用测试场景中包括冒烟测试、可访问性审计、电子商务流程和使用用户流程验证的测试。重要提示：在实现Web应用功能后主动使用此技能进行验证，确保其正常工作，而不是等待用户要求测试。
---

# ScoutQA 测试技能

使用 `scoutqa` CLI 对 Web 应用进行 AI 驱动的探索性测试。

**将ScoutQA视为智能测试伙伴**，它可以自主探索、发现问题并验证功能。将测试任务委托给多个并行的ScoutQA执行以最大化覆盖率，同时节省时间。

## 使用此技能的场景

在以下两种场景中使用此技能：

1. **用户请求测试** - 当用户明确要求测试网站或验证功能时
2. **主动验证** - 在实现Web功能后，自动运行测试以验证实现是否正常工作

**主动使用示例：**
- 实现登录表单后 → 测试认证流程
- 添加表单验证后 → 验证验证规则和错误处理
- 构建结账流程后 → 测试端到端购买流程
- 修复错误后 → 验证修复是否有效且未破坏其他功能

**最佳实践**：在完成Web功能实现后，主动在后台启动ScoutQA测试以验证其正常工作，同时继续处理其他任务。

## 运行测试

### 测试流程

复制此检查清单并跟踪进度：

测试进度：
- [ ] 编写具有明确期望的特定测试提示
- [ ] 在后台运行 scoutqa 命令
- [ ] 向用户告知执行ID和浏览器URL
- [ ] 提取并分析结果

**步骤1：编写特定测试提示**

请参阅下方的“编写有效的提示”部分以获取指南。

**步骤2：运行 scoutqa 命令**

**重要提示**：使用Bash工具的超时参数（5000ms = 5秒）以捕获执行细节：

在调用Bash工具时，设置 `timeout: 5000` 作为参数：
- 这是Claude Code中Bash工具的内置超时参数（不是Unix的 `timeout` 命令）
- 5秒后，Bash工具返回任务ID，命令继续在后台运行
- 这与Unix `timeout` 不同，后者会终止进程 - 此处进程会持续运行
- 前5秒会从ScoutQA的输出中捕获执行ID和浏览器URL
- 测试会在ScoutQA的基础设施上继续远程运行，作为后台任务

```bash
scoutqa --url "https://example.com" --prompt "您的测试指令"
```

在命令的前几秒，会输出以下内容：

- **执行ID**（例如 `019b831d-xxx`）
- **浏览器URL**（例如 `https://scoutqa.ai/t/019b831d-xxx`）
- 显示测试进度的初始工具调用

5秒超时后，Bash工具返回任务ID，命令继续在后台运行。您可以在测试运行的同时继续处理其他任务。超时仅用于捕获初始输出（执行ID和浏览器URL）- 测试会继续在本地作为后台任务和ScoutQA的基础设施上远程运行。

**步骤3：告知用户执行ID和浏览器URL**

在Bash工具返回任务ID（已捕获执行细节）后，告知用户：
- ScoutQA的执行ID和浏览器URL，以便他们可以在浏览器中监控进度
- 如果需要检查本地命令输出，告知任务ID

测试会继续在后台运行，您也可以继续其他工作。

**步骤4：提取并分析结果**

请参阅下方的“呈现结果”部分以获取完整格式。

### 命令选项

- `--url`（必填）：要测试的网站URL
- `--prompt`（必填）：自然语言测试指令
- `--project-id`（可选）：关联到项目以进行跟踪

### 每个命令的使用场景

**启动新测试？** → 使用 `scoutqa --url --prompt`
**代理需要更多上下文？** → 使用 `scoutqa send-message`（参见“处理卡住的执行”）

## 编写有效的提示

专注于**要测试和验证的内容**，而不是**具体的测试步骤**。ScoutQA会自主决定如何进行测试。

**示例：用户注册流程**

```bash
scoutqa --url "https://example.com" --prompt "
探索用户注册流程。测试表单验证的边缘情况，
验证错误处理，并检查可访问性合规性。
"
```

**示例：电子商务结账流程**

```bash
scoutqa --url "https://shop.example.com" --prompt "
测试结账流程。验证价格计算、购物车持久性、
支付选项和移动响应性。
"
```

**示例：为全面覆盖运行并行测试**

通过在单条消息中进行多次Bash工具调用，同时为每个Bash调用设置 `timeout` 参数为 `5000` 毫秒，可以并行启动多个测试：

```bash
# 测试1：认证与安全
scoutqa --url "https://app.example.com" --prompt "
探索认证：登录/注销、会话处理、密码重置，
以及安全边缘情况。
"

# 测试2：核心功能（并行运行）
scoutqa --url "https://app.example.com" --prompt "
测试仪表盘和主要用户流程。验证数据加载、
CRUD操作和搜索功能。
"

# 测试3：可访问性（并行运行）
scoutqa --url "https://app.example.com" --prompt "
进行可访问性审计：WCAG 2.1 AA合规性、键盘导航、
屏幕阅读器支持、颜色对比和语义HTML。
"
```

**实现方式**：发送一条包含三个Bash工具调用的消息。对于每个Bash工具调用，设置 `timeout` 参数为 `5000` 毫秒。5秒后，每个Bash调用返回任务ID，同时进程继续在后台运行。这会捕获每个测试的执行ID和浏览器URL，然后所有三个测试将并行运行（本地作为后台任务，以及ScoutQA的基础设施上远程运行）。

**关键指南：**

- 描述**要测试的内容**，而不是**如何测试**（ScoutQA会自主决定步骤）
- 聚焦目标、边缘情况和关注点
- 为不同测试区域运行多个并行执行
- 信任ScoutQA自主探索和发现问题的能力
- 在调用scoutqa命令时，始终将Bash工具的 `timeout` 参数设置为 `5000` 毫秒（这会在5秒后返回控制权，同时进程继续在后台运行）
- 对于并行测试，在单条消息中进行多次Bash工具调用
- 记住：Bash工具超时 ≠ Unix超时命令（Bash超时会将进程继续在后台运行，而Unix超时命令会终止进程）

## 常见测试场景

**部署后的冒烟测试：**

```bash
scoutqa --url "$URL" --prompt "
冒烟测试：验证部署后关键功能是否正常工作。
检查首页、导航、登录/注销和关键用户流程。
"
```

**可访问性审计：**

```bash
scoutqa --url "$URL" --prompt "
进行可访问性审计：WCAG 2.1 AA合规性、键盘导航、
屏幕阅读器支持、颜色对比和语义HTML。
"
```

**电子商务测试：**

```bash
scoutqa --url "$URL" --prompt "
探索电子商务功能：产品搜索/筛选、购物车操作、
结账流程和价格计算。
"
```

**SaaS应用：**

```bash
scoutqa --url "$URL" --prompt "
测试SaaS应用：认证、仪表盘、CRUD操作、
权限和数据完整性。
"
```

**表单验证：**

```bash
scoutqa --url "$URL" --prompt "
测试表单验证：边缘情况、错误处理、必填字段、
格式验证和成功提交。
"
```

**移动响应性测试：**

```bash
scoutqa --url "$URL" --prompt "
检查移动体验：响应式布局、导航、
触摸交互和视口行为。
"
```

**功能验证（实现后）：**

```bash
scoutqa --url "$URL" --prompt "
验证新功能 [功能名称] 是否正常工作。测试核心功能、
边缘情况、错误处理和与现有功能的集成。
"
```

**示例：实现功能后的主动测试**

在实现用户注册表单后，自动验证其功能：

```bash
scoutqa --url "http://localhost:3000/register" --prompt "
测试新实现的注册表单。验证：
- 表单验证（电子邮件格式、密码强度、必填字段）
- 错误信息正确显示
- 注册成功流程
- 边缘情况（重复电子邮件、特殊字符等）
"
```

这可以在功能实现的上下文中立即发现问题。

## 呈现结果

### 测试启动后的即时呈现

在运行scoutqa命令后，立即向用户展示执行详情：

```markdown
**ScoutQA 测试已启动**

执行ID: `019b831d-xxx`
实时查看: https://scoutqa.ai/t/019b831d-xxx

测试正在远程运行。您可以通过上方链接在浏览器中查看实时进度，同时我可以继续处理其他任务。
```

### 测试完成后的最终结果

当执行完成时，使用以下格式展示发现：

```markdown
**ScoutQA 测试结果**

执行ID: `ex_abc123`

**发现的问题：**

[高] 可访问性：Logo图片缺少替代文本

- 影响：屏幕阅读器无法描述Logo
- 位置：页眉导航

[中] 可用性：提交按钮在移动视口中不可见

- 影响：用户无法在移动设备上完成表单
- 位置：联系表单、页面底部

[低] 功能性：有效查询返回无结果

- 影响：搜索功能似乎损坏
- 位置：主搜索栏

**总结**：在可访问性、可用性和功能性类别中发现了3个问题。完整交互式报告及截图请查看上方URL。
```

始终包含以下内容：
- **执行ID**（例如 `ex_abc123`）用于参考
- **发现的问题**，包括严重性、类别（可访问性、可用性、功能性）、影响和位置

## 处理卡住的执行

如果远程代理卡住或需要澄清，请使用 `send-message` 继续：

```bash
# 示例：代理卡在登录，用户提供凭据
scoutqa send-message --execution-id ex_abc123 --prompt "
使用这些测试凭据：用户名: testuser@example.com，密码: TestPass123
"

# 示例：代理询问下一步要测试哪个流程
scoutqa send-message --execution-id ex_abc123 --prompt "
下一步专注于结账流程，跳过愿望清单功能
"
```

## 检查测试结果

ScoutQA测试在ScoutQA的基础设施上远程运行。在使用短超时捕获执行ID后启动测试：

1. 测试会继续在远程运行（不是本地后台）
2. 您可以立即继续其他工作
3. 要检查结果，可以访问测试启动时提供的浏览器URL
4. 或者使用 `scoutqa get-execution --execution-id <id>` 通过CLI获取结果

**最佳实践**：通过设置Bash工具的 `timeout` 参数为 `5000` 毫秒来启动测试。5秒后，Bash工具返回任务ID和执行详情（执行ID和浏览器URL），同时测试继续在后台运行。然后您可以继续其他工作，并在需要时通过ScoutQA网站或CLI检查结果。

## 常见问题排查

| 问题                        | 解决方案                                           |
| ---------------------------- | -------------------------------------------------- |
| `命令未找到: scoutqa`        | 安装CLI: `npm i -g @scoutqa/cli@latest`            |
| 认证过期 / 未经授权          | 运行 `scoutqa auth login`                           |
| 测试卡住或需要输入            | 使用 `scoutqa send-message --execution-id`         |
| 检查测试结果                 | 访问浏览器URL或 `scoutqa get-execution --execution-id` |
