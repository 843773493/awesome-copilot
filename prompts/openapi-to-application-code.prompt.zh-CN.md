---
agent: 'agent'
description: '根据OpenAPI规范生成一个完整、可生产的应用程序'
model: 'GPT-4.1'
tools: ['codebase', 'edit/editFiles', 'search/codebase']
---

# 根据OpenAPI规范生成应用程序

您的目标是使用当前框架的约定和最佳实践，从OpenAPI规范生成一个完整且可运行的应用程序。

## 输入要求

1. **OpenAPI规范**：提供以下任一形式：
   - OpenAPI规范的URL（例如：`https://api.example.com/openapi.json`）
   - 本地文件路径指向OpenAPI规范
   - 直接粘贴完整的OpenAPI规范内容

2. **项目详情**（如果未在规范中指定）：
   - 项目名称和描述
   - 目标框架及版本
   - 包/命名空间命名规范
   - 身份验证方法（如果OpenAPI规范中未指定）

## 生成流程

### 第一步：分析OpenAPI规范
- 验证OpenAPI规范的完整性和正确性
- 识别所有端点、HTTP方法、请求/响应模式
- 提取身份验证要求和安全方案
- 记录数据模型关系和约束条件
- 标记任何模糊性或定义不完整的部分

### 第二步：设计应用程序架构
- 规划适合当前框架的目录结构
- 按资源或领域分组控制器/处理程序
- 设计服务层以组织业务逻辑
- 规划数据模型和实体关系
- 设计配置和初始化策略

### 第三步：生成应用程序代码
- 创建包含构建/打包配置文件的项目结构
- 从OpenAPI模式生成模型/数据传输对象（DTOs）
- 生成包含路由映射的控制器/处理程序
- 生成服务层及其业务逻辑
- 如适用，生成仓库/数据访问层
- 添加错误处理、验证和日志功能
- 生成配置和启动代码

### 第四步：添加支持文件
- 为服务和控制器生成适当的单元测试
- 创建包含设置和运行说明的README文件
- 添加.gitignore文件和环境配置模板
- 生成API文档文件
- 创建示例请求/集成测试

## 输出结构

生成的应用程序将包括以下内容：

```
project-name/
├── README.md                      # 设置和使用说明
├── [构建配置]                     # 框架特定的构建文件（pom.xml、build.gradle、package.json等）
├── src/
│   ├── main/
│   │   ├── [语言]/
│   │   │   ├── controllers/       # HTTP端点处理程序
│   │   │   ├── services/          # 业务逻辑
│   │   │   ├── models/            # 数据模型和DTOs
│   │   │   ├── repositories/      # 数据访问（如适用）
│   │   │   └── config/            # 应用程序配置
│   │   └── resources/             # 配置文件
│   └── test/
│       ├── [语言]/
│       │   ├── controllers/       # 控制器测试
│       │   └── services/          # 服务测试
│       └── resources/             # 测试配置
├── .gitignore
├── .env.example                   # 环境变量模板
└── docker-compose.yml             # 可选：Docker设置（如适用）
```

## 应用的最佳实践

- **框架约定**：遵循框架特定的命名、结构和模式
- **关注点分离**：清晰的分层结构，包含控制器、服务和仓库
- **错误处理**：全面的错误处理，包含有意义的响应
- **验证**：在各处进行输入验证和模式验证
- **日志记录**：结构化日志记录以用于调试和监控
- **测试**：为服务和控制器生成单元测试
- **文档**：内联代码文档和设置说明
- **安全**：从OpenAPI规范实现身份验证/授权
- **可扩展性**：设计模式支持增长和维护

## 下一步操作

生成后：

1. 审查生成的代码结构，并根据需要进行自定义
2. 根据框架要求安装依赖项
3. 配置环境变量和数据库连接
4. 运行测试以验证生成的代码
5. 启动开发服务器
6. 使用提供的示例测试端点

## 如需进一步澄清的问题

- 应用程序是否应包含数据库/ORM设置，还是仅使用内存/模拟数据？
- 是否需要容器化配置（如Docker）？
- 身份验证应使用JWT、OAuth2、API密钥还是基本认证？
- 是否需要集成测试还是仅单元测试？
- 是否有特定的数据库技术偏好？
- API是否应包含分页、过滤和排序示例？
