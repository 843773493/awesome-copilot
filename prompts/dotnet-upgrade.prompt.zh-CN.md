

---
name: ".NET 升级分析提示"
description: "适用于全面 .NET 框架升级分析和执行的即用型提示"
---
  # 项目发现与评估
  - name: "项目分类分析"
    prompt: "识别解决方案中的所有项目并按类型（`.NET Framework`, `.NET Core`, `.NET Standard`）进行分类。分析每个 `.csproj` 文件的当前 `TargetFramework` 和 SDK 使用情况。"

  - name: "依赖项兼容性审查"
    prompt: "审查外部和内部依赖项的框架兼容性。根据依赖项图的深度确定升级复杂度。"

  - name: "遗留包检测"
    prompt: "识别需要迁移到 `PackageReference` 格式的遗留 `packages.config` 项目。"

  # 升级策略与执行顺序
  - name: "项目升级顺序"
    prompt: "推荐从依赖最少到依赖最多的组件升级顺序。建议在 API 或 Azure Function 迁移前如何隔离类库升级。"

  - name: "渐进式升级策略规划"
    prompt: "提出渐进式升级策略并设置回滚检查点。根据项目结构评估使用 **Upgrade Assistant** 或 **手动升级** 的适用性。"

  - name: "进度跟踪设置"
    prompt: "生成升级检查清单，用于跟踪所有项目的构建、测试和部署准备情况。"

  # 框架目标与代码调整
  - name: "目标框架选择"
    prompt: "为每个项目建议正确的 `TargetFramework`（例如 `net8.0`）。审查并更新已弃用的 SDK 或构建配置。"

  - name: "代码现代化分析"
    prompt: "识别需要现代化改造的代码模式（例如 `WebHostBuilder` → `HostBuilder`）。建议替换已弃用的 .NET API 和第三方库。"

  - name: "异步模式转换"
    prompt: "建议将同步调用转换为异步调用（在适当情况下），以提高性能和可扩展性。"

  # NuGet 与依赖项管理
  - name: "包兼容性分析"
    prompt: "分析过时或不兼容的 NuGet 包并建议兼容版本。识别缺乏 .NET 8 支持的第三方库并提供迁移路径。"

  - name: "共享依赖项策略"
    prompt: "建议处理跨项目共享依赖项升级的策略。评估遗留包的使用情况并建议 Microsoft 支持的命名空间中的替代方案。"

  - name: "传递依赖项审查"
    prompt: "审查升级后的传递依赖项和潜在版本冲突。建议解决依赖项冲突的策略。"

  # CI/CD 与构建管道更新
  - name: "管道配置分析"
    prompt: "分析 YAML 构建定义以固定 SDK 版本，并建议更新。建议对 `UseDotNet@2` 和 `NuGetToolInstaller` 任务进行修改。"

  - name: "构建管道现代化"
    prompt: "生成用于 .NET 8 迁移的更新构建管道片段。建议在合并到主分支前在特性分支上执行验证构建。"

  - name: "CI 自动化增强"
    prompt: "识别在 CI 管道中自动化测试和构建验证的机会。建议持续集成验证的策略。"

  # 测试与验证
  - name: "构建验证策略"
    prompt: "提出验证检查以确保升级后的解决方案能够成功构建和运行。建议在升级后执行自动化测试以验证单元和集成测试套件。"

  - name: "服务集成验证"
    prompt: "生成验证步骤以检查日志记录、遥测和服务连接性。建议验证向后兼容性和运行时行为的策略。"

  - name: "部署准备检查"
    prompt: "建议在生产部署前生成用户验收测试（UAT）部署验证步骤。为升级后的组件创建全面的测试场景。"

  # 破坏性变更分析
  - name: "API 废弃检测"
    prompt: "识别目标版本之间弃用的 API 或移除的命名空间。建议使用 `.NET Upgrade Assistant` 和 `API Analyzer` 进行自动化扫描。"

  - name: "API 替换策略"
    prompt: "建议已知破坏性区域的替换 API 或库。审查配置更改，例如 `Startup.cs` → `Program.cs` 的重构。"

  - name: "回归测试重点"
    prompt: "建议针对升级后的 API 端点或服务进行回归测试场景。为关键功能验证创建测试计划。"

  # 版本控制与提交策略
  - name: "分支策略规划"
    prompt: "建议用于安全升级并支持回滚的分支策略。为部分和完整项目升级生成提交模板。"

  - name: "PR 结构优化"
    prompt: "建议创建结构化 PR 的最佳实践（例如 `升级到 .NET [版本]`）。识别涉及破坏性变更的 PR 的标签策略。"

  - name: "代码审查指南"
    prompt: "建议同行评审的重点领域（构建、测试和依赖项验证）。为有效的升级审查创建检查清单。"

  # 文档与沟通
  - name: "升级文档策略"
    prompt: "建议如何在 PR 中记录每个项目的框架变更。提出自动化发布说明生成方案，汇总升级内容和测试结果。"

  - name: "利益相关者沟通"
    prompt: "建议向消费者沟通版本升级和迁移时间表。生成依赖项更新和验证结果的文档模板。"

  - name: "进度跟踪系统"
    prompt: "建议维护一个升级摘要仪表盘或 markdown 检查清单。创建用于跟踪多个项目升级进度的模板。"

  # 工具与自动化
  - name: "升级工具选择"
    prompt: "建议何时以及如何使用：`.NET Upgrade Assistant`、`dotnet list package --outdated`、`dotnet migrate` 和 `graph.json` 依赖项可视化工具。"

  - name: "分析脚本生成"
    prompt: "生成用于升级前分析依赖项图的脚本或提示。提出 AI 辅助提示，让 Copilot 自动识别升级问题。"

  - name: "多仓库验证"
    prompt: "建议如何在多个仓库中验证自动化输出。为企业级规模升级创建标准化的验证工作流。"

  # 最终验证与交付
  - name: "最终解决方案验证"
    prompt: "生成验证步骤以确认最终升级的解决方案通过所有验证检查。建议在升级后生成生产部署验证步骤。"

  - name: "部署准备确认"
    prompt: "建议生成最终测试结果和构建产物。创建汇总各项目完成情况的检查清单（构建/测试/部署）。"

  - name: "发布文档"
    prompt: "生成汇总框架变更和 CI/CD 更新的发布说明。创建全面的升级摘要文档。"