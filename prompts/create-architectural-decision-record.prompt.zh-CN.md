

---
agent: '代理'
description: '创建架构决策记录（ADR）文档，用于AI优化的决策文档化。'
tools: ['更改', '代码库搜索', '编辑文件', '扩展', '获取', 'GitHub仓库', '打开简单浏览器', '问题', '运行任务', '搜索', '搜索结果', '终端最后命令', '终端选择运行', '测试失败', '用法', 'VSCode API']
---
# 创建架构决策记录

使用结构化格式为 `${input:DecisionTitle}` 创建架构决策记录（ADR）文档，该格式需优化以适应AI解析和人类可读性。

## 输入参数

- **背景**: `${input:Context}`
- **决策**: `${input:Decision}`
- **替代方案**: `${input:Alternatives}`
- **利益相关者**: `${input:Stakeholders}`

## 输入验证
如果任何必需的输入未提供或无法从对话历史中确定，请在生成ADR之前要求用户提供缺失的信息。

## 要求

- 使用精确且无歧义的语言
- 遵循标准化的ADR格式，包含前置内容（front matter）
- 包含正反两方面的后果
- 用拒绝理由记录替代方案
- 便于机器解析和人类参考的结构
- 对多项目部分使用编码项目符号（3-4字母代码 + 3位数字编号）

ADR必须保存在 `/docs/adr/` 目录中，文件命名规范为：`adr-NNNN-[标题slug].md`，其中NNNN是下一个连续的4位数字（例如：`adr-0001-数据库选择.md`）。

## 必备文档结构

文档文件必须遵循以下模板，确保所有部分都正确填写。Markdown的前置内容应按照示例结构正确组织：

```md
---
标题: "ADR-NNNN: [决策标题]"
状态: "提议"
日期: "YYYY-MM-DD"
作者: "[利益相关者姓名/角色]"
标签: ["架构", "决策"]
取代: ""
被取代: ""
---

# ADR-NNNN: [决策标题]

## 状态

**提议** | 已接受 | 被拒绝 | 已取代 | 已弃用

## 背景

[问题陈述、技术限制、业务需求以及需要此决策的环境因素。]

## 决策

[选定的解决方案及其选择的明确理由。]

## 后果

### 正面影响

- **POS-001**: [有益的结果和优势]
- **POS-002**: [性能、可维护性和可扩展性改进]
- **POS-003**: [与架构原则的一致性]

### 负面影响

- **NEG-001**: [权衡、限制和缺点]
- **NEG-002**: [引入的技术债务或复杂性]
- **NEG-003**: [风险和未来挑战]

## 已考虑的替代方案

### [替代方案1名称]

- **ALT-001**: **描述**: [简要的技术描述]
- **ALT-002**: **拒绝理由**: [为何未选择此选项]

### [替代方案2名称]

- **ALT-003**: **描述**: [简要的技术描述]
- **ALT-004**: **拒绝理由**: [为何未选择此选项]

## 实施注意事项

- **IMP-001**: [关键的实施考虑因素]
- **IMP-002**: [如适用，迁移或部署策略]
- **IMP-003**: [监控和成功标准]

## 参考资料

- **REF-001**: [相关ADR]
- **REF-002**: [外部文档]
- **REF-003**: [引用的标准或框架]
```